.block {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 580px;   /* 作答區大小 */
  height: auto;
  cursor: pointer;
}

.block img {
  width: 100%;   /* 讓圖片撐滿區塊 */
  height: auto;
  display: block;
}

/* 讓最後幾個字不換行用 */
.no-break { white-space: nowrap; }

/* 外層：負責定位與置中，不旋轉 */
#block1 .block-slot,
#block2 .block-slot {
  position: absolute;
  top: 22%;
  left: 32%;
  width: 55%;
  height: 110px;
  padding-right: 20px;

  display: flex;
  align-items: center;
  justify-content: flex-start;

  overflow: visible;
  text-align: left;
  line-height: 1.4;
  white-space: normal;
  word-break: break-word;
  z-index: 1;
}

/* 內層：只負責文字與旋轉 */
#block1 .block-text,
#block2 .block-text {
  display: block;
  transform: rotate(-2deg);
  transform-origin: center;
  font-size: 28px;
  font-weight: 350;
  color: #000;
}

/* 副文字（縣市 / 鄉鎮市區） */
#block1 .block-subtext {
  position: absolute;
  top: 185%;
  left: -35%;
  width: 60%;
  font-size: 28px;
  font-weight: 400;
  color: #000;
  line-height: 2;
  text-align: center;   /* 置中 */
}

#block2 .block-subtext {
  position: absolute;
  top: 185%;
  left: -55%;
  width: 60%;
  font-size: 28px;
  font-weight: 400;
  color: #000;
  line-height: 2;
  text-align: center;   /* 置中 */
}

/* ========= 按鈕覆蓋層（不影響文字排版） ========= */
#block1 .ui-overlay,
#block2 .ui-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2; /* 蓋過文字層 */
}

.btn-row {
  position: absolute;
  left: var(--x, 0);
  top:  var(--y, 0);
  display: flex;
  gap: 10px;            /* 基本間距 */
  pointer-events: auto; /* 允許點擊 */
}

.dist-row { gap: 20px; } /* 鄉鎮市區那排：間距更大 */

/* ========= 白色系・日系手遊風格按鈕 ========= */
.gbtn {
  background: linear-gradient(180deg, #ffffff, #f2f3f5);
  border: 2px solid #cfd3da;
  border-radius: 14px;
  padding: 6px 16px;
  min-width: 86px;        /* 三字基準寬度，讓「直轄市」「省轄市」橫排 */
  white-space: nowrap;    /* 禁止自動換行 */
  text-align: center;

  font-size: 20px;
  font-weight: 600;
  color: #2f3542;
  box-shadow: 0 3px 0 #c6cbd3, 0 6px 12px rgba(0,0,0,.10);
  cursor: pointer;
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease, border-color .12s ease;
  user-select: none;
}

.gbtn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 0 #c6cbd3, 0 12px 18px rgba(0,0,0,.14);
}

.gbtn:active {
  transform: translateY(2px);
  box-shadow: 0 1px 0 #c6cbd3, 0 6px 10px rgba(0,0,0,.12);
}

/* 焦點可見性（鍵盤操作可見） */
.gbtn:focus-visible {
  outline: 3px solid #9ec5ff;  /* 淺藍 */
  outline-offset: 2px;
}

/* 小按鈕（縣、鄉、鎮、市、區）—更窄，高度不變 */
.gbtn.gbtn-small {
  min-width: 58px;
  padding: 6px 12px;
}

/* 選取狀態（點擊後） */
.gbtn.is-active {
  background: linear-gradient(180deg, #e9f3ff, #d9ebff); /* 淺藍 */
  border-color: #88b6ff;
  color: #1f3b73;
  box-shadow: 0 3px 0 #80aef7, 0 10px 18px rgba(31,59,115,.20);
}

/* 簡易判題高亮（1 秒）：ok / ng */
.gbtn.ok {
  background: linear-gradient(180deg, #e6ffec, #d4f7dc);
  border-color: #4ccd74;
  color: #135b2b;
}
.gbtn.ng {
  background: linear-gradient(180deg, #ffecec, #ffdada);
  border-color: #ff8b8b;
  color: #7a1b1b;
}

/* ========= 卡車可/不可點的視覺狀態 ========= */
#truck.disabled {
  opacity: .70;
  filter: grayscale(30%);
  pointer-events: none;
  cursor: not-allowed;
}
#truck:not(.disabled) {
  cursor: pointer;
  opacity: 1;
  filter: none;
}

/* ========= 上方資訊框（time / score） ========= */
.info { position: absolute; }

.info img {
  width: 100%;
  height: auto;
  display: block; /* 移除 img 預設的下方空隙 */
}

.info .label {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;  /* 左右分開固定 */
  padding: 0 60px 0 40px;
  white-space: nowrap;
  font-size: 36px;
  font-weight: 700;
  color: #000;
  pointer-events: none;
}

/* ✅ 時間到要把東西隱藏用 */
.hidden { display: none !important; }

/* ===== 起始頁 Start Screen ===== */

/* 只在起始頁套用背景與置中版面 */
.start-page {
  margin: 0;
  min-height: 100svh;
  height: 100dvh;
  width: 100vw;
  background: url("picture/background.png") no-repeat center center;
  background-size: cover;
  overflow: hidden;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center; /* 文字先置中，由區塊再覆蓋置左 */
  padding: 20px;
}

.start-wrap {
  position: relative;
  height: 100%;
  width: 100%;
}

/* 大圖（避免被裁切，寬度自適應） */
.start-illust {
  position: absolute;
  top: -1vh;                  /* 以動態視窗高，避免瀏覽器UI變動造成飄移 */
  left: 50%;
  transform: translateX(-50%);
  width: clamp(680px, 76vw, 1080px);
  height: auto;
  user-select: none;
  z-index: 1;                /* 圖層最底 */
}

/* 說明文字 */
.game-desc {
  margin: 0;
  font-size: clamp(16px, 2.0vw, 22px);
  line-height: 1.7;
  color: #222;
  text-shadow: none;
  text-align: left;
}

/* === HUD：基準（桌機/大螢幕） ===
   ❶ 不同於小螢幕，桌機不寫 right，讓 clamp 控寬
*/
.start-page .hud-panel {
  position: absolute;
  left: 18.5vw;
  bottom: 8dvh;

  width: clamp(820px, 44vw, 900px); /* 略微縮小，提升跨裝置穩定性 */
  padding: 14px 40px;
  box-sizing: border-box;

  background: rgba(255, 255, 255, 0.82);
  border: 2px solid rgba(207, 211, 218, 0.9);
  border-radius: 18px;
  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.18);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);

  text-align: left;
  z-index: 5; /* 疊在大圖上方 */
}

/* ==== 開始按鈕：基準（桌機） ==== */
#startBtn.start-cta {
  position: absolute;
  bottom: 10dvh;
  right: 18vw;

  width: auto;
  height: auto;
  padding: 8px 16px;
  background: none; /* 移除背景 */
  border: none; /* 移除邊框 */
  box-shadow: none; /* 移除陰影 */

  font: 700 20px/1 'Arial', sans-serif;
  color: #222; /* 與遊戲說明文字相同的顏色 */
  letter-spacing: 1px;
  text-transform: uppercase;

  display: inline-block;
  cursor: pointer; 
  user-select: none;
  transition: all 0.2s ease;
  z-index: 10; /* 在框與圖之上 */
}

/* 移除光效，因為沒有背景 */

/* hover/active/focus 效果 */
@media (hover: hover) {
  #startBtn.start-cta:hover {
    color: #4a90e2; /* 懸停時變為藍色 */
    transform: translateY(-1px); /* 輕微上移 */
  }
}
#startBtn.start-cta:active {
  transform: translateY(0);
  color: #357abd; /* 點擊時變為深藍色 */
}
#startBtn.start-cta:focus-visible {
  outline: 2px solid #4a90e2;
  outline-offset: 4px;
  border-radius: 4px;
}

/* ==== 小螢幕（<=768px）覆蓋：用左右留白決定寬度 ==== */
@media (max-width: 768px) {
  .start-page .hud-panel {
    left: 6vw; right: 6vw;   /* 寬度 = 100vw - 左右邊距 */
    bottom: 12dvh;
    width: auto;             /* 交給左右邊距決定，不用 clamp */
    padding: 12px 30px;
  }
  #startBtn.start-cta {
    right: 6vw; bottom: 12dvh;
    padding: 6px 12px;
    font-size: 18px;
  }
}

/* ==== 更小螢幕（<=480px）微調 ==== */
@media (max-width: 480px) {
  .start-page .hud-panel {
    left: 4vw; right: 4vw;
    bottom: 10dvh;
    padding: 10px 25px;
  }
  #startBtn.start-cta {
    right: 4vw; bottom: 10dvh;
    padding: 5px 10px;
    font-size: 16px;
  }
  .game-desc { font-size: 16px; line-height: 1.6; }
}

/* ===== 結局頁專屬微調（避免圖片遮擋與位移） ===== */
.end-page .start-illust {
  top: -1vh;
  width: clamp(680px, 76vw, 1080px);
}
.end-page .hud-panel {
  left: 18.5vw;
  bottom: 8dvh;
  width: clamp(820px, 44vw, 900px);
}
@media (max-width: 768px) {
  .end-page .hud-panel { left: 6vw; right: 6vw; bottom: 12dvh; width: auto; }
}
@media (max-width: 480px) {
  .end-page .hud-panel { left: 4vw; right: 4vw; bottom: 10dvh; }
}

/* ====== 新增優化樣式 ====== */

@keyframes shake {
  /* 注意：原本的 translateY(-50%) 必須保留，否則動畫時會失去垂直置中 */
  0% { transform: translate(0, -50%); }
  20% { transform: translate(-10px, -50%); }
  40% { transform: translate(10px, -50%); }
  60% { transform: translate(-10px, -50%); }
  80% { transform: translate(10px, -50%); }
  100% { transform: translate(0, -50%); }
}

.shake-effect {
  animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
}
/* 正確答案的提示樣式 (當玩家選錯時，正確的按鈕會亮起) */
.gbtn.correct-hint {
  background: #4ccd74 !important;
  color: white !important;
  border-color: #2ea052 !important;
  box-shadow: 0 0 10px #4ccd74;
}

/* 錯誤選擇的樣式 */
.gbtn.error-choice {
  background: #ff6b6b !important;
  color: white !important;
  border-color: #c92a2a !important;
}

/* 卡車點擊時的下壓效果 */
#truck:active {
  transform: translateX(-50%) scale(0.95);
  transition: transform 0.1s;
}